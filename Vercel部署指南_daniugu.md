# ğŸš€ Vercel + Cloudflare éƒ¨ç½²æŒ‡å— - daniugu.online

## ğŸ“‹ éƒ¨ç½²ä¿¡æ¯

- **åŸŸå**: daniugu.online
- **GitHub**: https://github.com/jet20002025-hash/daniugu
- **å¹³å°**: Vercel + Cloudflare

## âš¡ å¿«é€Ÿéƒ¨ç½²æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šæ¨é€ä»£ç åˆ° GitHub

```bash
cd /Users/zwj/è‚¡ç¥¨åˆ†æ

# åˆå§‹åŒ– Gitï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
git init
git add .
git commit -m "Initial commit: å¤§ç‰›è‚¡åˆ†æç³»ç»Ÿ"

# æ·»åŠ è¿œç¨‹ä»“åº“
git remote add origin https://github.com/jet20002025-hash/daniugu.git
git branch -M main
git push -u origin main
```

**æ³¨æ„**ï¼šå¦‚æœæç¤ºéœ€è¦è®¤è¯ï¼Œä½¿ç”¨ GitHub Personal Access Tokenã€‚

### ç¬¬äºŒæ­¥ï¼šåœ¨ Vercel éƒ¨ç½²

1. **ç™»å½• Vercel**
   - è®¿é—® [vercel.com](https://vercel.com)
   - ä½¿ç”¨ GitHub è´¦å·ç™»å½•

2. **å¯¼å…¥é¡¹ç›®**
   - ç‚¹å‡» **"New Project"**
   - é€‰æ‹©ä½ çš„ GitHub ä»“åº“ `jet20002025-hash/daniugu`
   - Vercel ä¼šè‡ªåŠ¨æ£€æµ‹é…ç½®

3. **é…ç½®é¡¹ç›®**
   - **Framework Preset**: é€‰æ‹© "Other" æˆ–è®© Vercel è‡ªåŠ¨æ£€æµ‹
   - **Root Directory**: ç•™ç©ºï¼ˆä½¿ç”¨æ ¹ç›®å½•ï¼‰
   - **Build Command**: ç•™ç©ºï¼ˆPython é¡¹ç›®ä¸éœ€è¦æ„å»ºï¼‰
   - **Output Directory**: ç•™ç©º
   - **Install Command**: `pip install -r requirements.txt`

4. **ç¯å¢ƒå˜é‡**ï¼ˆå¦‚æœéœ€è¦ï¼‰
   - `PYTHON_VERSION=3.9`

5. **éƒ¨ç½²**
   - ç‚¹å‡» **"Deploy"**
   - ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆé€šå¸¸ 2-5 åˆ†é’Ÿï¼‰

6. **è·å–éƒ¨ç½²åœ°å€**
   - éƒ¨ç½²å®Œæˆåï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªåœ°å€ï¼š`https://ä½ çš„é¡¹ç›®å.vercel.app`
   - è®°ä¸‹è¿™ä¸ªåœ°å€ï¼Œåç»­é…ç½®åŸŸåéœ€è¦

### ç¬¬ä¸‰æ­¥ï¼šé…ç½®è‡ªå®šä¹‰åŸŸå

1. **åœ¨ Vercel æ·»åŠ åŸŸå**
   - è¿›å…¥é¡¹ç›® â†’ **Settings** â†’ **Domains**
   - ç‚¹å‡» **"Add Domain"**
   - è¾“å…¥ `daniugu.online`
   - ç‚¹å‡» **"Add"**

2. **è·å– DNS é…ç½®ä¿¡æ¯**
   - Vercel ä¼šæ˜¾ç¤ºéœ€è¦é…ç½®çš„ DNS è®°å½•
   - é€šå¸¸æ˜¯ CNAME è®°å½•ï¼š`cname.vercel-dns.com`

### ç¬¬å››æ­¥ï¼šé…ç½® Cloudflare

#### 4.1 åœ¨ Cloudflare æ·»åŠ åŸŸå

1. ç™»å½• [Cloudflare](https://dash.cloudflare.com)
2. ç‚¹å‡» **"Add a Site"**
3. è¾“å…¥ `daniugu.online`
4. é€‰æ‹© **å…è´¹è®¡åˆ’**ï¼ˆFreeï¼‰

#### 4.2 è·å– Cloudflare DNS æœåŠ¡å™¨

- Cloudflare ä¼šæä¾›ä¸¤ä¸ª DNS æœåŠ¡å™¨åœ°å€ï¼Œä¾‹å¦‚ï¼š
  - `xxx.ns.cloudflare.com`
  - `yyy.ns.cloudflare.com`

#### 4.3 åœ¨é˜¿é‡Œäº‘ä¿®æ”¹ DNS æœåŠ¡å™¨

1. ç™»å½• [é˜¿é‡Œäº‘æ§åˆ¶å°](https://ecs.console.aliyun.com)
2. è¿›å…¥ **åŸŸå** â†’ **åŸŸåè§£æ**
3. æ‰¾åˆ° `daniugu.online`ï¼Œç‚¹å‡» **"ä¿®æ”¹ DNS æœåŠ¡å™¨"**
4. å°†é˜¿é‡Œäº‘çš„ DNS æœåŠ¡å™¨æ›¿æ¢ä¸º Cloudflare æä¾›çš„åœ°å€
5. ä¿å­˜

#### 4.4 åœ¨ Cloudflare é…ç½® DNS è®°å½•

1. å›åˆ° Cloudflare Dashboard
2. è¿›å…¥ **DNS** â†’ **Records**
3. æ·»åŠ  CNAME è®°å½•ï¼š
   ```
   Type: CNAME
   Name: @
   Target: cname.vercel-dns.com
   Proxy status: ğŸŸ  Proxiedï¼ˆæ©™è‰²äº‘æœµï¼‰
   ```
4. æ·»åŠ  www å­åŸŸåï¼ˆå¯é€‰ï¼‰ï¼š
   ```
   Type: CNAME
   Name: www
   Target: cname.vercel-dns.com
   Proxy status: ğŸŸ  Proxiedï¼ˆæ©™è‰²äº‘æœµï¼‰
   ```
5. ç‚¹å‡» **"Save"**

#### 4.5 é…ç½® SSL/TLS

1. è¿›å…¥ **SSL/TLS** è®¾ç½®
2. é€‰æ‹© **"Full"** æ¨¡å¼
3. å¯ç”¨ **"Always Use HTTPS"**

#### 4.6 ç­‰å¾…ç”Ÿæ•ˆ

- DNS æœåŠ¡å™¨æ›´æ”¹éœ€è¦ **1-24 å°æ—¶** ç”Ÿæ•ˆ
- é€šå¸¸ **1-2 å°æ—¶** å†…å°±ä¼šå¼€å§‹å·¥ä½œ

### ç¬¬äº”æ­¥ï¼šéªŒè¯éƒ¨ç½²

1. **ç­‰å¾… DNS ç”Ÿæ•ˆ**ï¼ˆ1-24 å°æ—¶ï¼‰
2. **åœ¨ Vercel Dashboard æŸ¥çœ‹åŸŸåçŠ¶æ€**
   - åº”è¯¥æ˜¾ç¤º "Valid Configuration"
3. **è®¿é—®æµ‹è¯•**
   - http://daniugu.online
   - https://daniugu.onlineï¼ˆCloudflare ä¼šè‡ªåŠ¨é…ç½® SSLï¼‰

## âš ï¸ é‡è¦é™åˆ¶è¯´æ˜

### Vercel Serverless å‡½æ•°é™åˆ¶

1. **æ‰§è¡Œæ—¶é—´é™åˆ¶**ï¼š
   - Hobby è®¡åˆ’ï¼š10ç§’
   - Pro è®¡åˆ’ï¼š60ç§’ â­ï¼ˆæ¨èï¼‰
   - Enterprise è®¡åˆ’ï¼š300ç§’

2. **å½“å‰åº”ç”¨çš„é—®é¢˜**ï¼š
   - æ‰«æè‚¡ç¥¨åŠŸèƒ½å¯èƒ½éœ€è¦å¾ˆé•¿æ—¶é—´ï¼ˆå‡ åˆ†é’Ÿåˆ°å‡ å°æ—¶ï¼‰
   - åå°ä»»åŠ¡åœ¨ serverless ç¯å¢ƒä¸­å¯èƒ½ä¸ç¨³å®š

### è§£å†³æ–¹æ¡ˆ

#### æ–¹æ¡ˆä¸€ï¼šå¼‚æ­¥å¤„ç†ï¼ˆæ¨èï¼‰

å°†é•¿æ—¶é—´ä»»åŠ¡æ”¹ä¸ºå¼‚æ­¥å¤„ç†ï¼š

1. **æ‰«æå¼€å§‹æ—¶ç«‹å³è¿”å›ä»»åŠ¡ID**
2. **å‰ç«¯è½®è¯¢æŸ¥è¯¢è¿›åº¦**
3. **ä½¿ç”¨ Vercel KV æˆ–å¤–éƒ¨æ•°æ®åº“å­˜å‚¨çŠ¶æ€**

#### æ–¹æ¡ˆäºŒï¼šå‡çº§ Vercel è®¡åˆ’

- å‡çº§åˆ° **Pro è®¡åˆ’**ï¼ˆ$20/æœˆï¼Œ60ç§’é™åˆ¶ï¼‰
- æˆ– **Enterprise è®¡åˆ’**ï¼ˆ300ç§’é™åˆ¶ï¼‰

#### æ–¹æ¡ˆä¸‰ï¼šä¼˜åŒ–æ‰«æé€»è¾‘

- é™åˆ¶å•æ¬¡æ‰«ææ•°é‡
- åˆ†æ‰¹å¤„ç†
- ä½¿ç”¨ç¼“å­˜å‡å°‘é‡å¤è®¡ç®—

## ğŸ”§ ä»£ç è°ƒæ•´å»ºè®®

ç”±äº Vercel çš„é™åˆ¶ï¼Œå»ºè®®è¿›è¡Œä»¥ä¸‹è°ƒæ•´ï¼š

### 1. æ‰«æä»»åŠ¡æ”¹ä¸ºå¼‚æ­¥

```python
# ä¿®æ”¹æ‰«æ APIï¼Œç«‹å³è¿”å›ä»»åŠ¡ID
@app.route('/api/scan_all_stocks', methods=['POST'])
def scan_all_stocks():
    # ç”Ÿæˆä»»åŠ¡ID
    task_id = str(uuid.uuid4())
    
    # å¯åŠ¨åå°ä»»åŠ¡ï¼ˆä½¿ç”¨ Vercel Background Functionsï¼‰
    # æˆ–ä½¿ç”¨å¤–éƒ¨æœåŠ¡ï¼ˆå¦‚ Upstash Redis + Queueï¼‰
    
    return jsonify({
        'success': True,
        'task_id': task_id,
        'message': 'æ‰«æå·²å¼€å§‹ï¼Œè¯·è½®è¯¢æŸ¥è¯¢è¿›åº¦'
    })

# æŸ¥è¯¢è¿›åº¦ API
@app.route('/api/get_scan_progress/<task_id>')
def get_scan_progress(task_id):
    # ä»å­˜å‚¨ä¸­è·å–è¿›åº¦
    progress = get_task_progress(task_id)
    return jsonify(progress)
```

### 2. ä½¿ç”¨å¤–éƒ¨å­˜å‚¨

- **Vercel KV**ï¼šé”®å€¼å­˜å‚¨ï¼ˆé€‚åˆå­˜å‚¨ä»»åŠ¡çŠ¶æ€ï¼‰
- **Upstash Redis**ï¼šRedis æœåŠ¡
- **æ•°æ®åº“**ï¼šPostgreSQLã€MySQL

### 3. é™åˆ¶æ‰«æèŒƒå›´

```python
# é™åˆ¶å•æ¬¡æ‰«ææ•°é‡
limit = data.get('limit', 100)  # é»˜è®¤åªæ‰«æ100åª

# åˆ†æ‰¹å¤„ç†
batch_size = 50
for i in range(0, total_stocks, batch_size):
    batch = stock_list[i:i+batch_size]
    # å¤„ç†æ‰¹æ¬¡
```

## ğŸ“Š ç›‘æ§å’Œç»´æŠ¤

### Vercel Dashboard

- æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€
- æŸ¥çœ‹æ—¥å¿—
- æŸ¥çœ‹åˆ†ææ•°æ®
- é…ç½®ç¯å¢ƒå˜é‡

### Cloudflare Analytics

- æŸ¥çœ‹è®¿é—®ç»Ÿè®¡
- æŸ¥çœ‹æ€§èƒ½æ•°æ®
- æŸ¥çœ‹å®‰å…¨äº‹ä»¶

## ğŸ”„ æ›´æ–°éƒ¨ç½²

æ¯æ¬¡æ¨é€åˆ° GitHub ä¸»åˆ†æ”¯ï¼ŒVercel ä¼šè‡ªåŠ¨ï¼š
1. æ£€æµ‹ä»£ç å˜æ›´
2. é‡æ–°æ„å»º
3. éƒ¨ç½²æ–°ç‰ˆæœ¬

ä¹Ÿå¯ä»¥æ‰‹åŠ¨è§¦å‘ï¼š
- Vercel Dashboard â†’ Deployments â†’ Redeploy

## ğŸ’° è´¹ç”¨

- **Vercel Hobby**: å…è´¹ï¼ˆ10ç§’é™åˆ¶ï¼‰
- **Vercel Pro**: $20/æœˆï¼ˆ60ç§’é™åˆ¶ï¼Œæ¨èï¼‰
- **Cloudflare**: å…è´¹ï¼ˆåŸºç¡€åŠŸèƒ½ï¼‰
- **Vercel KV**: å…è´¹é¢åº¦æœ‰é™ï¼Œè¶…å‡ºåæ”¶è´¹

## ğŸ› å¸¸è§é—®é¢˜

### é—®é¢˜1: éƒ¨ç½²å¤±è´¥

**æ£€æŸ¥**ï¼š
- `requirements.txt` æ˜¯å¦æ­£ç¡®
- Python ç‰ˆæœ¬æ˜¯å¦å…¼å®¹
- æŸ¥çœ‹ Vercel éƒ¨ç½²æ—¥å¿—

### é—®é¢˜2: è¶…æ—¶é”™è¯¯

**è§£å†³**ï¼š
- å°†é•¿æ—¶é—´ä»»åŠ¡æ”¹ä¸ºå¼‚æ­¥
- å‡çº§ Vercel è®¡åˆ’
- é™åˆ¶æ‰«æèŒƒå›´

### é—®é¢˜3: DNS ä¸ç”Ÿæ•ˆ

**è§£å†³**ï¼š
- ç­‰å¾…æ›´é•¿æ—¶é—´ï¼ˆæœ€é•¿ 24 å°æ—¶ï¼‰
- æ£€æŸ¥ DNS é…ç½®æ˜¯å¦æ­£ç¡®
- æ¸…é™¤æœ¬åœ° DNS ç¼“å­˜

### é—®é¢˜4: SSL è¯ä¹¦é—®é¢˜

**è§£å†³**ï¼š
- Cloudflare ä¼šè‡ªåŠ¨é…ç½® SSL
- ç¡®ä¿ DNS è§£ææ­£ç¡®
- ç­‰å¾… SSL è¯ä¹¦ç”Ÿæ•ˆï¼ˆé€šå¸¸å‡ åˆ†é’Ÿï¼‰

## ğŸ“ éƒ¨ç½²æ£€æŸ¥æ¸…å•

- [ ] ä»£ç å·²æ¨é€åˆ° GitHub
- [ ] Vercel é¡¹ç›®å·²åˆ›å»ºå¹¶éƒ¨ç½²
- [ ] è‡ªå®šä¹‰åŸŸåå·²æ·»åŠ åˆ° Vercel
- [ ] Cloudflare å·²æ·»åŠ åŸŸå
- [ ] DNS æœåŠ¡å™¨å·²ä¿®æ”¹ä¸º Cloudflare
- [ ] DNS è®°å½•å·²é…ç½®ï¼ˆCNAME æŒ‡å‘ Vercelï¼‰
- [ ] SSL/TLS å·²é…ç½®ï¼ˆFull æ¨¡å¼ï¼‰
- [ ] ç½‘ç«™å¯ä»¥æ­£å¸¸è®¿é—®
- [ ] HTTPS æ­£å¸¸å·¥ä½œ

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹ Vercel éƒ¨ç½²æ—¥å¿—
2. æŸ¥çœ‹ Cloudflare é…ç½®
3. æ£€æŸ¥ DNS è§£æ
4. æŸ¥çœ‹åº”ç”¨æ—¥å¿—

---

**éƒ¨ç½²å®Œæˆåï¼Œè®¿é—® https://daniugu.online å³å¯ä½¿ç”¨ï¼**

**æ³¨æ„**ï¼šç”±äº Vercel çš„é™åˆ¶ï¼Œå»ºè®®å…ˆæµ‹è¯•éƒ¨ç½²ï¼Œç¡®è®¤åŠŸèƒ½æ­£å¸¸ã€‚å¦‚æœæ‰«æåŠŸèƒ½è¶…æ—¶ï¼Œè€ƒè™‘ä½¿ç”¨å¼‚æ­¥å¤„ç†æˆ–å‡çº§è®¡åˆ’ã€‚


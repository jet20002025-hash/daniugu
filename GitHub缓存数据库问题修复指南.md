# ğŸ”§ GitHub è‚¡ç¥¨ç¼“å­˜æ•°æ®åº“é—®é¢˜ä¿®å¤æŒ‡å—

## é—®é¢˜åŸå› 

**æ ¸å¿ƒé—®é¢˜**ï¼šGitHub Releases ä¸Šçš„æ•°æ®åŒ…åªåŒ…å« K çº¿æ•°æ®æ–‡ä»¶ï¼ˆ`cache/daily_kline/` å’Œ `cache/weekly_kline/`ï¼‰ï¼Œä½†**ä¸åŒ…å«** `stock_list_all.json`ï¼ˆè‚¡ç¥¨åˆ—è¡¨ç¼“å­˜æ–‡ä»¶ï¼‰ã€‚

`check_cache_status` API æ£€æŸ¥çš„æ˜¯ `stock_list_all.json` æ–‡ä»¶ï¼Œæ‰€ä»¥æ˜¾ç¤º"ç¼“å­˜ä¸å­˜åœ¨"ã€‚

## å·²ä¿®å¤

### 1. åˆ›å»ºè‡ªåŠ¨ç”Ÿæˆè„šæœ¬

åˆ›å»ºäº† `generate_stock_list_from_files.py` è„šæœ¬ï¼Œå¯ä»¥ä» K çº¿æ–‡ä»¶åˆ—è¡¨è‡ªåŠ¨ç”Ÿæˆ `stock_list_all.json`ï¼š

- æ‰«æ `cache/weekly_kline/` ç›®å½•ï¼Œæ”¶é›†æ‰€æœ‰è‚¡ç¥¨ä»£ç 
- æ‰«æ `cache/daily_kline/` ç›®å½•ï¼Œè¡¥å……ç¼ºå¤±çš„è‚¡ç¥¨ä»£ç 
- å°è¯•ä» K çº¿æ–‡ä»¶ä¸­è¯»å–è‚¡ç¥¨åç§°
- å¦‚æœ K çº¿æ–‡ä»¶ä¸­æ²¡æœ‰åç§°ï¼Œå°è¯•ä½¿ç”¨ akshare API è·å–
- ç”Ÿæˆç¬¦åˆæ ¼å¼çš„ `stock_list_all.json` æ–‡ä»¶

### 2. é›†æˆåˆ°ä¸‹è½½æµç¨‹

ä¿®æ”¹äº† `download_stock_data.py`ï¼š
- ä¸‹è½½å¹¶è§£å‹æ•°æ®åï¼Œè‡ªåŠ¨è°ƒç”¨ `generate_stock_list_from_files.py`
- å¦‚æœç”ŸæˆæˆåŠŸï¼Œæ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
- å¦‚æœç”Ÿæˆå¤±è´¥ï¼Œä¸å½±å“ä½¿ç”¨ï¼ˆå°†ä» API è·å–è‚¡ç¥¨åˆ—è¡¨ï¼‰

ä¿®æ”¹äº† `bull_stock_web.py`ï¼š
- åœ¨ Render ç¯å¢ƒå¯åŠ¨æ—¶ï¼Œå¦‚æœæ£€æµ‹åˆ°æ•°æ®å·²ä¸‹è½½ä½† `stock_list_all.json` ä¸å­˜åœ¨ï¼Œè‡ªåŠ¨ç”Ÿæˆ

## ä½¿ç”¨æ–¹æ³•

### æ–¹æ³• 1ï¼šæ‰‹åŠ¨ç”Ÿæˆï¼ˆæœ¬åœ°æµ‹è¯•ï¼‰

```bash
cd /Users/zwj/è‚¡ç¥¨åˆ†æ
python3 generate_stock_list_from_files.py
```

### æ–¹æ³• 2ï¼šè‡ªåŠ¨ç”Ÿæˆï¼ˆRender ç¯å¢ƒï¼‰

1. **ç¡®ä¿ GitHub Releases æ•°æ®åŒ…å·²ä¸Šä¼ **
   - åŒ…å« `cache/` å’Œ `stock_data/` ç›®å½•

2. **è®¾ç½®ç¯å¢ƒå˜é‡**
   - åœ¨ Render Dashboard ä¸­è®¾ç½® `STOCK_DATA_URL`

3. **é‡æ–°éƒ¨ç½²**
   - æœåŠ¡å™¨å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨ä¸‹è½½æ•°æ®å¹¶ç”Ÿæˆè‚¡ç¥¨åˆ—è¡¨

### æ–¹æ³• 3ï¼šåœ¨æ•°æ®åŒ…ä¸­åŒ…å«è‚¡ç¥¨åˆ—è¡¨

åœ¨ä¸Šä¼ æ•°æ®åŒ…å‰ï¼Œå…ˆè¿è¡Œï¼š
```bash
python3 generate_stock_list_from_files.py
```

ç„¶åå°†ç”Ÿæˆçš„ `cache/stock_list_all.json` ä¸€èµ·æ‰“åŒ…ä¸Šä¼ ã€‚

## éªŒè¯

### æ£€æŸ¥è‚¡ç¥¨åˆ—è¡¨æ˜¯å¦ç”Ÿæˆ

```bash
ls -lh cache/stock_list_all.json
```

### æ£€æŸ¥è‚¡ç¥¨æ•°é‡

```bash
python3 -c "import json; data=json.load(open('cache/stock_list_all.json')); print(f'è‚¡ç¥¨æ•°: {len(data)} åª')"
```

### æ£€æŸ¥ç¼“å­˜çŠ¶æ€ API

è®¿é—®ï¼š`https://www.daniugu.online/api/check_cache_status`

åº”è¯¥è¿”å›ï¼š
```json
{
  "success": true,
  "cache_exists": true,
  "cached_stock_count": 9885,
  "message": "ç¼“å­˜å­˜åœ¨ï¼Œè‚¡ç¥¨æ•°: 9885 åª"
}
```

## å½“å‰çŠ¶æ€

âœ… è„šæœ¬å·²åˆ›å»ºï¼š`generate_stock_list_from_files.py`
âœ… å·²é›†æˆåˆ°ä¸‹è½½æµç¨‹ï¼š`download_stock_data.py`
âœ… å·²é›†æˆåˆ°å¯åŠ¨æµç¨‹ï¼š`bull_stock_web.py`
âœ… æœ¬åœ°æµ‹è¯•æˆåŠŸï¼šç”Ÿæˆäº† 9885 åªè‚¡ç¥¨çš„åˆ—è¡¨

## ä¸‹ä¸€æ­¥

### å¯¹äº Render éƒ¨ç½²

1. **é‡æ–°éƒ¨ç½²åº”ç”¨**
   - æœåŠ¡å™¨å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨æ£€æŸ¥å¹¶ç”Ÿæˆè‚¡ç¥¨åˆ—è¡¨

2. **æˆ–è€…æ‰‹åŠ¨è§¦å‘**
   - åœ¨ Render Shell ä¸­è¿è¡Œï¼š
   ```bash
   python3 generate_stock_list_from_files.py
   ```

### å¯¹äº GitHub Releases æ•°æ®åŒ…

**å»ºè®®**ï¼šåœ¨ä¸Šä¼ æ•°æ®åŒ…å‰ï¼Œå…ˆè¿è¡Œ `generate_stock_list_from_files.py` ç”Ÿæˆè‚¡ç¥¨åˆ—è¡¨ï¼Œç„¶åä¸€èµ·æ‰“åŒ…ä¸Šä¼ ã€‚è¿™æ ·å¯ä»¥ï¼š
- é¿å…æ¯æ¬¡éƒ¨ç½²éƒ½éœ€è¦ç”Ÿæˆ
- åŠ å¿«éƒ¨ç½²é€Ÿåº¦
- ç¡®ä¿æ•°æ®ä¸€è‡´æ€§

## æ³¨æ„äº‹é¡¹

1. **è‚¡ç¥¨åç§°è·å–**ï¼š
   - ä¼˜å…ˆä» K çº¿æ–‡ä»¶è¯»å–
   - å¦‚æœ K çº¿æ–‡ä»¶ä¸­æ²¡æœ‰ï¼Œå°è¯•ä½¿ç”¨ akshare API
   - å¦‚æœéƒ½å¤±è´¥ï¼Œä½¿ç”¨è‚¡ç¥¨ä»£ç ä½œä¸ºåç§°

2. **æ•°æ®æ ¼å¼**ï¼š
   - ç”Ÿæˆçš„ JSON æ ¼å¼ï¼š`[{"code": "000001", "name": "å¹³å®‰é“¶è¡Œ"}, ...]`
   - ç¬¦åˆ `data_fetcher.py` çš„è¯»å–æ ¼å¼

3. **æ€§èƒ½**ï¼š
   - ç”Ÿæˆ 9885 åªè‚¡ç¥¨çš„åˆ—è¡¨å¤§çº¦éœ€è¦å‡ ç§’é’Ÿ
   - å¦‚æœä½¿ç”¨ akshare API è·å–åç§°ï¼Œå¯èƒ½éœ€è¦æ›´é•¿æ—¶é—´

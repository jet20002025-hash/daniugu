# âœ… Render + Cloudflare + GitHub éƒ¨ç½²éªŒè¯æŒ‡å—

## ğŸ“‹ ä½ çš„éƒ¨ç½²æ¶æ„

- **ä»£ç ä»“åº“**: GitHub (jet20002025-hash/daniugu)
- **åº”ç”¨æ‰˜ç®¡**: Render
- **CDN åŠ é€Ÿ**: Cloudflare
- **åŸŸå**: daniugu.online

---

## âœ… éƒ¨ç½²éªŒè¯æ¸…å•

### 1. Render éƒ¨ç½²æ£€æŸ¥

#### æ£€æŸ¥æœåŠ¡çŠ¶æ€
- [ ] è®¿é—® Render Dashboard: https://dashboard.render.com
- [ ] ç¡®è®¤ Web æœåŠ¡çŠ¶æ€ä¸º **"Live"**ï¼ˆè¿è¡Œä¸­ï¼‰
- [ ] æŸ¥çœ‹ **"Logs"** æ ‡ç­¾ï¼Œç¡®è®¤åº”ç”¨æ­£å¸¸å¯åŠ¨
- [ ] æŸ¥çœ‹ **"Metrics"** æ ‡ç­¾ï¼Œç›‘æ§èµ„æºä½¿ç”¨æƒ…å†µ

#### æ£€æŸ¥ç¯å¢ƒå˜é‡
åœ¨ Render Dashboard â†’ Environment æ ‡ç­¾ï¼Œç¡®è®¤å·²é…ç½®ï¼š

**å¿…éœ€çš„ç¯å¢ƒå˜é‡**ï¼š
- [ ] `UPSTASH_REDIS_REST_URL` - Upstash Redis URL
- [ ] `UPSTASH_REDIS_REST_TOKEN` - Upstash Redis Token
- [ ] `RENDER=true` - Render ç¯å¢ƒæ ‡è¯†

**å¯é€‰çš„ç¯å¢ƒå˜é‡**ï¼š
- [ ] `INVITE_CODES` - é‚€è¯·ç ï¼ˆå¦‚ `ADMIN2024,VIP2024`ï¼‰
- [ ] `VIP_ALIPAY_ACCOUNT` - VIP æ”¯ä»˜è´¦å·ï¼ˆå¦‚ `522168878@qq.com`ï¼‰

#### æ£€æŸ¥å¯åŠ¨å‘½ä»¤
åœ¨ Render Dashboard â†’ Settings â†’ Start Commandï¼Œç¡®è®¤ï¼š
```
gunicorn bull_stock_web:app --bind 0.0.0.0:$PORT --workers 1 --timeout 120
```

#### æµ‹è¯• Render ç›´æ¥è®¿é—®
- [ ] è®¿é—® Render æä¾›çš„åœ°å€ï¼š`https://ä½ çš„æœåŠ¡å.onrender.com`
- [ ] ç¡®è®¤å¯ä»¥æ­£å¸¸è®¿é—®
- [ ] æµ‹è¯•ç™»å½•/æ³¨å†ŒåŠŸèƒ½

---

### 2. Cloudflare é…ç½®æ£€æŸ¥

#### æ£€æŸ¥åŸŸåçŠ¶æ€
- [ ] ç™»å½• Cloudflare Dashboard: https://dash.cloudflare.com
- [ ] é€‰æ‹©åŸŸå `daniugu.online`
- [ ] ç¡®è®¤åŸŸåçŠ¶æ€ä¸º **"Active"**ï¼ˆæ´»è·ƒï¼‰

#### æ£€æŸ¥ DNS è®°å½•
åœ¨ Cloudflare Dashboard â†’ DNS â†’ Recordsï¼Œç¡®è®¤ï¼š

**www å­åŸŸå**ï¼š
- [ ] Type: `CNAME`
- [ ] Name: `www`
- [ ] Target: `ä½ çš„æœåŠ¡å.onrender.com`ï¼ˆå¦‚ `daniugu.onrender.com`ï¼‰
- [ ] Proxy status: ğŸŸ  **Proxied**ï¼ˆæ©™è‰²äº‘æœµï¼Œå¯ç”¨ CDNï¼‰

**æ ¹åŸŸå**ï¼š
- [ ] Type: `CNAME` æˆ– `A`
- [ ] Name: `@`
- [ ] Target: `ä½ çš„æœåŠ¡å.onrender.com` æˆ– Render IP
- [ ] Proxy status: ğŸŸ  **Proxied**ï¼ˆæ©™è‰²äº‘æœµï¼Œå¯ç”¨ CDNï¼‰

#### æ£€æŸ¥ SSL/TLS è®¾ç½®
åœ¨ Cloudflare Dashboard â†’ SSL/TLSï¼š
- [ ] SSL/TLS encryption mode: **"Full"** æˆ– **"Full (strict)"**
- [ ] Always Use HTTPS: **"On"**ï¼ˆå·²å¯ç”¨ï¼‰

#### æµ‹è¯• Cloudflare CDN
- [ ] è®¿é—® `https://www.daniugu.online`
- [ ] è®¿é—® `https://daniugu.online`
- [ ] åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰â†’ Network æ ‡ç­¾
- [ ] æŸ¥çœ‹å“åº”å¤´ï¼Œç¡®è®¤æœ‰ `server: cloudflare` æ ‡è¯†
- [ ] ç¡®è®¤è®¿é—®é€Ÿåº¦æ­£å¸¸

---

### 3. GitHub é›†æˆæ£€æŸ¥

#### æ£€æŸ¥è‡ªåŠ¨éƒ¨ç½²
- [ ] åœ¨ Render Dashboard â†’ Settings â†’ Build & Deploy
- [ ] ç¡®è®¤ **"Auto-Deploy"** å·²å¯ç”¨
- [ ] ç¡®è®¤ **"Branch"** è®¾ç½®ä¸º `main`
- [ ] æ¨é€ä»£ç åˆ° GitHubï¼Œç¡®è®¤ Render è‡ªåŠ¨éƒ¨ç½²

---

## ğŸ”§ ä¼˜åŒ–å»ºè®®

### 1. Render ä¼˜åŒ–

#### å…è´¹ç‰ˆé™åˆ¶
- âš ï¸ **è‡ªåŠ¨ä¼‘çœ **: 15 åˆ†é’Ÿæ— æ´»åŠ¨åä¼‘çœ ï¼Œä¸‹æ¬¡è®¿é—®éœ€è¦ 30-60 ç§’å¯åŠ¨
- âœ… **æ— è¶…æ—¶é™åˆ¶**: å¯ä»¥æ‰§è¡Œé•¿æ—¶é—´ä»»åŠ¡ï¼ˆè¿™æ˜¯æœ€å¤§ä¼˜åŠ¿ï¼‰

#### å‡çº§å»ºè®®
å¦‚æœç»å¸¸ä½¿ç”¨ï¼Œå»ºè®®å‡çº§åˆ° **Starter è®¡åˆ’ï¼ˆ$7/æœˆï¼‰**ï¼š
- âœ… ä¸ä¼šä¼‘çœ 
- âœ… æ›´å¿«å¯åŠ¨
- âœ… æ›´å¤šèµ„æº

#### ä¿æŒæ´»è·ƒï¼ˆå…è´¹ç‰ˆï¼‰
å¦‚æœä¸æƒ³å‡çº§ï¼Œå¯ä»¥ä½¿ç”¨å¤–éƒ¨ç›‘æ§æœåŠ¡å®šæœŸè®¿é—®ï¼Œä¿æŒæœåŠ¡æ´»è·ƒï¼š
- ä½¿ç”¨ UptimeRobotï¼ˆå…è´¹ï¼‰
- æˆ–ä½¿ç”¨ cron job å®šæœŸè®¿é—®

### 2. Cloudflare ä¼˜åŒ–

#### ç¼“å­˜é…ç½®
åœ¨ Cloudflare Dashboard â†’ Caching â†’ Configurationï¼š
- [ ] é…ç½®ç¼“å­˜è§„åˆ™ï¼ˆå¯é€‰ï¼‰
- [ ] é™æ€èµ„æºï¼ˆCSSã€JSã€å›¾ç‰‡ï¼‰å¯ä»¥ç¼“å­˜æ›´é•¿æ—¶é—´
- [ ] API è¯·æ±‚ä¸ç¼“å­˜

#### æ€§èƒ½ä¼˜åŒ–
åœ¨ Cloudflare Dashboard â†’ Speedï¼š
- [ ] Auto Minify: å¯ç”¨ï¼ˆå‹ç¼© HTMLã€CSSã€JSï¼‰
- [ ] Brotli: å¯ç”¨ï¼ˆæ›´å¥½çš„å‹ç¼©ï¼‰

#### å®‰å…¨è®¾ç½®
åœ¨ Cloudflare Dashboard â†’ Securityï¼š
- [ ] Security Level: Mediumï¼ˆä¸­ç­‰ï¼‰
- [ ] Bot Fight Mode: å¯ç”¨ï¼ˆå¯é€‰ï¼‰

---

## ğŸ› å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜ 1: Render æœåŠ¡ä¼‘çœ 

**ç°è±¡**: è®¿é—®æ—¶ç­‰å¾… 30-60 ç§’æ‰å“åº”

**åŸå› **: å…è´¹ç‰ˆ 15 åˆ†é’Ÿæ— æ´»åŠ¨åè‡ªåŠ¨ä¼‘çœ 

**è§£å†³**:
- å‡çº§åˆ° Starterï¼ˆ$7/æœˆï¼‰
- æˆ–ä½¿ç”¨å¤–éƒ¨ç›‘æ§ä¿æŒæ´»è·ƒ

### é—®é¢˜ 2: Cloudflare 502 é”™è¯¯

**å¯èƒ½åŸå› **:
- Render æœåŠ¡æœªå¯åŠ¨
- SSL/TLS æ¨¡å¼é…ç½®é”™è¯¯

**è§£å†³**:
1. æ£€æŸ¥ Render æœåŠ¡çŠ¶æ€
2. ç¡®è®¤ SSL/TLS æ¨¡å¼ä¸º **"Full"**
3. æš‚æ—¶ç¦ç”¨ Cloudflare ä»£ç†æµ‹è¯•

### é—®é¢˜ 3: ç”¨æˆ·æ•°æ®ä¸¢å¤±

**åŸå› **: æœªé…ç½® Upstash Redis

**è§£å†³**: é…ç½® `UPSTASH_REDIS_REST_URL` å’Œ `UPSTASH_REDIS_REST_TOKEN`

### é—®é¢˜ 4: è®¿é—®é€Ÿåº¦æ…¢

**å¯èƒ½åŸå› **:
- Cloudflare CDN æœªå¯ç”¨ï¼ˆProxy çŠ¶æ€ä¸ºç°è‰²ï¼‰
- æœåŠ¡å™¨ä½ç½®è¾ƒè¿œ

**è§£å†³**:
1. ç¡®è®¤ Proxy çŠ¶æ€ä¸º ğŸŸ  **Proxied**ï¼ˆæ©™è‰²äº‘æœµï¼‰
2. ç­‰å¾… CDN ç¼“å­˜ç”Ÿæ•ˆ
3. æ£€æŸ¥ Cloudflare çš„ CDN èŠ‚ç‚¹

---

## ğŸ“Š ç›‘æ§å’Œç»´æŠ¤

### Render ç›‘æ§

1. **æŸ¥çœ‹æ—¥å¿—**
   - Render Dashboard â†’ Logs
   - å®æ—¶æŸ¥çœ‹åº”ç”¨æ—¥å¿—
   - æ’æŸ¥é”™è¯¯

2. **æŸ¥çœ‹æŒ‡æ ‡**
   - Render Dashboard â†’ Metrics
   - ç›‘æ§ CPUã€å†…å­˜ä½¿ç”¨
   - ç›‘æ§è¯·æ±‚æ•°

3. **è®¾ç½®å‘Šè­¦**ï¼ˆä»˜è´¹ç‰ˆï¼‰
   - é…ç½®æœåŠ¡å¼‚å¸¸å‘Šè­¦
   - é…ç½®èµ„æºä½¿ç”¨å‘Šè­¦

### Cloudflare ç›‘æ§

1. **æŸ¥çœ‹åˆ†æ**
   - Cloudflare Dashboard â†’ Analytics
   - æŸ¥çœ‹è®¿é—®ç»Ÿè®¡
   - æŸ¥çœ‹æ€§èƒ½æŒ‡æ ‡

2. **æŸ¥çœ‹æ—¥å¿—**ï¼ˆä»˜è´¹ç‰ˆï¼‰
   - Cloudflare Dashboard â†’ Logs
   - æŸ¥çœ‹è¯¦ç»†è®¿é—®æ—¥å¿—

---

## ğŸ”„ æ›´æ–°éƒ¨ç½²

### è‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¨èï¼‰

æ¯æ¬¡æ¨é€åˆ° GitHub çš„ `main` åˆ†æ”¯ï¼ŒRender ä¼šè‡ªåŠ¨ï¼š
1. æ£€æµ‹ä»£ç å˜æ›´
2. é‡æ–°æ„å»º
3. éƒ¨ç½²æ–°ç‰ˆæœ¬

### æ‰‹åŠ¨éƒ¨ç½²

1. **åœ¨ Render Dashboard**
   - Manual Deploy â†’ Deploy latest commit

2. **æˆ–æ¨é€ä»£ç åˆ° GitHub**
   ```bash
   git add .
   git commit -m "æ›´æ–°ä»£ç "
   git push origin main
   ```

---

## âœ… éƒ¨ç½²æˆåŠŸæ ‡å¿—

éƒ¨ç½²æˆåŠŸåï¼Œä½ åº”è¯¥èƒ½å¤Ÿï¼š

- âœ… é€šè¿‡ `https://www.daniugu.online` è®¿é—®
- âœ… é€šè¿‡ `https://daniugu.online` è®¿é—®ï¼ˆè‡ªåŠ¨é‡å®šå‘åˆ° wwwï¼‰
- âœ… ä½¿ç”¨é‚€è¯·ç æ³¨å†Œè´¦å·
- âœ… ç™»å½•ç³»ç»Ÿ
- âœ… æ‰§è¡Œæ‰«æåŠŸèƒ½ï¼ˆæ— è¶…æ—¶é™åˆ¶ï¼‰
- âœ… æ•°æ®æŒä¹…åŒ–ï¼ˆç”¨æˆ·æ•°æ®ä¸ä¸¢å¤±ï¼‰

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

1. **æŸ¥çœ‹æ—¥å¿—**
   - Render Dashboard â†’ Logs
   - Cloudflare Dashboard â†’ Analytics

2. **æ£€æŸ¥é…ç½®**
   - ç¡®è®¤ç¯å¢ƒå˜é‡å·²é…ç½®
   - ç¡®è®¤ DNS è®°å½•æ­£ç¡®
   - ç¡®è®¤ SSL/TLS è®¾ç½®æ­£ç¡®

3. **å‚è€ƒæ–‡æ¡£**
   - `Render+Cloudflareéƒ¨ç½²æ­¥éª¤.md`
   - `Renderç¯å¢ƒå˜é‡é…ç½®æŒ‡å—.md`
   - `Renderå¯ç”¨Cloudflareä»£ç†æ­¥éª¤.md`

---

## ğŸ‰ å®Œæˆï¼

ä½ çš„ç³»ç»Ÿç°åœ¨åº”è¯¥å·²ç»æˆåŠŸéƒ¨ç½²åˆ° Render + Cloudflareï¼

**è®¿é—®åœ°å€**:
- ä¸»åŸŸå: `https://www.daniugu.online`
- æ ¹åŸŸå: `https://daniugu.online`

**ä¼˜åŠ¿**:
- âœ… æ— æ‰§è¡Œæ—¶é—´é™åˆ¶ï¼ˆå¯ä»¥é•¿æ—¶é—´æ‰«æï¼‰
- âœ… CDN åŠ é€Ÿï¼ˆè®¿é—®é€Ÿåº¦æ›´å¿«ï¼‰
- âœ… è‡ªåŠ¨ HTTPSï¼ˆå®‰å…¨è¿æ¥ï¼‰
- âœ… è‡ªåŠ¨éƒ¨ç½²ï¼ˆGitHub æ¨é€å³æ›´æ–°ï¼‰
- âœ… å…è´¹ä½¿ç”¨ï¼ˆå…è´¹ç‰ˆå¯ç”¨ï¼‰

å¦‚æœ‰é—®é¢˜ï¼ŒæŸ¥çœ‹ Render å’Œ Cloudflare çš„æ—¥å¿—æ’æŸ¥ã€‚

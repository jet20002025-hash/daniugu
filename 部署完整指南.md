# ðŸš€ å®Œæ•´éƒ¨ç½²æŒ‡å— - daniugu.online

## ðŸ“‹ éƒ¨ç½²ä¿¡æ¯

- **åŸŸå**: daniugu.online
- **GitHub**: https://github.com/jet20002025-hash/daniugu
- **æœåŠ¡å™¨**: é˜¿é‡Œäº‘æœåŠ¡å™¨

## ðŸŽ¯ éƒ¨ç½²æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šå°†ä»£ç æŽ¨é€åˆ° GitHub

#### 1. åœ¨æœ¬åœ°æ‰§è¡ŒæŽ¨é€è„šæœ¬

```bash
cd /Users/zwj/è‚¡ç¥¨åˆ†æž
bash æŽ¨é€åˆ°GitHub.sh
```

#### 2. æˆ–è€…æ‰‹åŠ¨æ‰§è¡Œ

```bash
cd /Users/zwj/è‚¡ç¥¨åˆ†æž

# åˆå§‹åŒ– Gitï¼ˆå¦‚æžœè¿˜æ²¡æœ‰ï¼‰
git init

# æ·»åŠ æ‰€æœ‰æ–‡ä»¶
git add .

# æäº¤
git commit -m "Initial commit: å¤§ç‰›è‚¡åˆ†æžç³»ç»Ÿ"

# æ·»åŠ è¿œç¨‹ä»“åº“
git remote add origin https://github.com/jet20002025-hash/daniugu.git

# æŽ¨é€åˆ° GitHub
git branch -M main
git push -u origin main
```

**æ³¨æ„**ï¼šå¦‚æžœæç¤ºéœ€è¦è®¤è¯ï¼Œå¯ä»¥ä½¿ç”¨ï¼š
- GitHub Personal Access Tokenï¼ˆæŽ¨èï¼‰
- æˆ– GitHub ç”¨æˆ·åå’Œå¯†ç 

### ç¬¬äºŒæ­¥ï¼šåœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²

#### 1. SSH è¿žæŽ¥åˆ°æœåŠ¡å™¨

```bash
ssh root@ä½ çš„æœåŠ¡å™¨IP
```

#### 2. ä¸Šä¼ éƒ¨ç½²è„šæœ¬åˆ°æœåŠ¡å™¨

åœ¨æœ¬åœ°æ‰§è¡Œï¼š

```bash
scp æœåŠ¡å™¨éƒ¨ç½²è„šæœ¬_å®Œæ•´ç‰ˆ.sh root@ä½ çš„æœåŠ¡å™¨IP:/root/
```

#### 3. åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œéƒ¨ç½²è„šæœ¬

```bash
# SSH è¿žæŽ¥æœåŠ¡å™¨åŽ
cd /root
chmod +x æœåŠ¡å™¨éƒ¨ç½²è„šæœ¬_å®Œæ•´ç‰ˆ.sh
bash æœåŠ¡å™¨éƒ¨ç½²è„šæœ¬_å®Œæ•´ç‰ˆ.sh
```

#### 4. æˆ–è€…æ‰‹åŠ¨éƒ¨ç½²

æŒ‰ç…§ `é˜¿é‡Œäº‘æœåŠ¡å™¨éƒ¨ç½²æŒ‡å—.md` ä¸­çš„æ­¥éª¤æ“ä½œã€‚

### ç¬¬ä¸‰æ­¥ï¼šé…ç½®åŸŸåè§£æž

#### åœ¨é˜¿é‡Œäº‘ DNS è§£æžä¸­æ·»åŠ è®°å½•

1. ç™»å½• [é˜¿é‡Œäº‘æŽ§åˆ¶å°](https://ecs.console.aliyun.com)
2. è¿›å…¥ **åŸŸå** â†’ **åŸŸåè§£æž**
3. é€‰æ‹©åŸŸå `daniugu.online`
4. æ·»åŠ  A è®°å½•ï¼š

```
è®°å½•ç±»åž‹: A
ä¸»æœºè®°å½•: @
è®°å½•å€¼: ä½ çš„æœåŠ¡å™¨IPåœ°å€
TTL: 600
```

5. æ·»åŠ  www å­åŸŸåï¼ˆå¯é€‰ï¼‰ï¼š

```
è®°å½•ç±»åž‹: A
ä¸»æœºè®°å½•: www
è®°å½•å€¼: ä½ çš„æœåŠ¡å™¨IPåœ°å€
TTL: 600
```

6. ç­‰å¾… DNS ç”Ÿæ•ˆï¼ˆé€šå¸¸ 5-30 åˆ†é’Ÿï¼‰

### ç¬¬å››æ­¥ï¼šé…ç½® SSL è¯ä¹¦ï¼ˆHTTPSï¼‰

#### æ–¹å¼ä¸€ï¼šä½¿ç”¨ Certbotï¼ˆLet's Encrypt å…è´¹è¯ä¹¦ï¼‰

```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ

# å®‰è£… Certbot
# CentOS/RHEL
yum install certbot python3-certbot-nginx -y

# Ubuntu/Debian
apt install certbot python3-certbot-nginx -y

# èŽ·å–è¯ä¹¦
certbot --nginx -d daniugu.online -d www.daniugu.online

# è‡ªåŠ¨ç»­æœŸæµ‹è¯•
certbot renew --dry-run
```

#### æ–¹å¼äºŒï¼šä½¿ç”¨é˜¿é‡Œäº‘ SSL è¯ä¹¦

1. åœ¨é˜¿é‡Œäº‘ç”³è¯·æˆ–è´­ä¹° SSL è¯ä¹¦
2. ä¸‹è½½è¯ä¹¦æ–‡ä»¶
3. é…ç½®åˆ° Nginx

### ç¬¬äº”æ­¥ï¼šéªŒè¯éƒ¨ç½²

1. **æ£€æŸ¥æœåŠ¡çŠ¶æ€**ï¼š

```bash
systemctl status stock-analyzer
systemctl status nginx
```

2. **è®¿é—®æµ‹è¯•**ï¼š

- HTTP: http://daniugu.online
- HTTPS: https://daniugu.onlineï¼ˆé…ç½® SSL åŽï¼‰

3. **æ£€æŸ¥æ—¥å¿—**ï¼š

```bash
# åº”ç”¨æ—¥å¿—
tail -f /var/www/stock-analyzer/logs/error.log

# Nginx æ—¥å¿—
tail -f /var/log/nginx/stock-analyzer-access.log
```

## ðŸ”„ æ›´æ–°ä»£ç 

### æ–¹å¼ä¸€ï¼šåœ¨æœåŠ¡å™¨ä¸Šç›´æŽ¥æ›´æ–°

```bash
# SSH è¿žæŽ¥åˆ°æœåŠ¡å™¨
ssh root@ä½ çš„æœåŠ¡å™¨IP

# è¿›å…¥åº”ç”¨ç›®å½•
cd /var/www/stock-analyzer

# æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# å¦‚æžœæœ‰æ–°çš„ä¾èµ–ï¼Œå®‰è£…
source venv/bin/activate
pip install -r requirements.txt

# é‡å¯æœåŠ¡
systemctl restart stock-analyzer
```

### æ–¹å¼äºŒï¼šä½¿ç”¨è‡ªåŠ¨éƒ¨ç½²è„šæœ¬

åˆ›å»ºæ›´æ–°è„šæœ¬ï¼š

```bash
cat > /var/www/stock-analyzer/update.sh << 'EOF'
#!/bin/bash
cd /var/www/stock-analyzer
git pull origin main
source venv/bin/activate
pip install -r requirements.txt
systemctl restart stock-analyzer
echo "æ›´æ–°å®Œæˆï¼"
EOF

chmod +x /var/www/stock-analyzer/update.sh
```

ä½¿ç”¨ï¼š

```bash
/var/www/stock-analyzer/update.sh
```

## ðŸŒ é…ç½® Cloudflareï¼ˆå¯é€‰ä½†æŽ¨èï¼‰

### ä¸ºä»€ä¹ˆæŽ¨è Cloudflareï¼Ÿ

1. **CDN åŠ é€Ÿ**ï¼šå…¨çƒèŠ‚ç‚¹ï¼Œè®¿é—®æ›´å¿«
2. **DDoS é˜²æŠ¤**ï¼šè‡ªåŠ¨é˜²æŠ¤æ”»å‡»
3. **å…è´¹ SSL**ï¼šè‡ªåŠ¨é…ç½® HTTPS
4. **ç¼“å­˜ä¼˜åŒ–**ï¼šå‡å°‘æœåŠ¡å™¨è´Ÿè½½

### é…ç½®æ­¥éª¤

1. **åœ¨ Cloudflare æ·»åŠ åŸŸå**
   - ç™»å½• [Cloudflare](https://dash.cloudflare.com)
   - ç‚¹å‡» "Add a Site"
   - è¾“å…¥ `daniugu.online`
   - é€‰æ‹©å…è´¹è®¡åˆ’

2. **èŽ·å– Cloudflare DNS æœåŠ¡å™¨**
   - Cloudflare ä¼šæä¾›ä¸¤ä¸ª DNS æœåŠ¡å™¨åœ°å€

3. **åœ¨é˜¿é‡Œäº‘ä¿®æ”¹ DNS æœåŠ¡å™¨**
   - ç™»å½•é˜¿é‡Œäº‘æŽ§åˆ¶å°
   - è¿›å…¥ **åŸŸå** â†’ **åŸŸåè§£æž**
   - æ‰¾åˆ° `daniugu.online`ï¼Œç‚¹å‡» **"ä¿®æ”¹ DNS æœåŠ¡å™¨"**
   - å°†é˜¿é‡Œäº‘çš„ DNS æœåŠ¡å™¨æ›¿æ¢ä¸º Cloudflare æä¾›çš„åœ°å€

4. **åœ¨ Cloudflare é…ç½® DNS è®°å½•**
   - è¿›å…¥ Cloudflare Dashboard
   - è¿›å…¥ **DNS** â†’ **Records**
   - æ·»åŠ  A è®°å½•ï¼š
     ```
     Type: A
     Name: @
     Content: ä½ çš„æœåŠ¡å™¨IP
     Proxy: ðŸŸ  Proxiedï¼ˆæ©™è‰²äº‘æœµï¼‰
     ```

5. **SSL/TLS è®¾ç½®**
   - è¿›å…¥ **SSL/TLS** è®¾ç½®
   - é€‰æ‹© **"Full"** æ¨¡å¼
   - å¯ç”¨ **"Always Use HTTPS"**

## ðŸ“Š ç›‘æŽ§å’Œç»´æŠ¤

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€

```bash
# åº”ç”¨æœåŠ¡
systemctl status stock-analyzer

# Nginx æœåŠ¡
systemctl status nginx
```

### æŸ¥çœ‹æ—¥å¿—

```bash
# åº”ç”¨æ—¥å¿—
tail -f /var/www/stock-analyzer/logs/error.log
tail -f /var/www/stock-analyzer/logs/access.log

# Nginx æ—¥å¿—
tail -f /var/log/nginx/stock-analyzer-access.log
tail -f /var/log/nginx/stock-analyzer-error.log
```

### é‡å¯æœåŠ¡

```bash
# é‡å¯åº”ç”¨
systemctl restart stock-analyzer

# é‡å¯ Nginx
systemctl restart nginx

# é‡å¯æ‰€æœ‰æœåŠ¡
systemctl restart stock-analyzer nginx
```

### æ£€æŸ¥ç«¯å£

```bash
# æ£€æŸ¥åº”ç”¨ç«¯å£
netstat -tlnp | grep 5002

# æ£€æŸ¥ Nginx ç«¯å£
netstat -tlnp | grep :80
netstat -tlnp | grep :443
```

## ðŸ› å¸¸è§é—®é¢˜

### é—®é¢˜1: æœåŠ¡å¯åŠ¨å¤±è´¥

**æ£€æŸ¥**ï¼š
```bash
systemctl status stock-analyzer
journalctl -u stock-analyzer -n 50
```

**å¯èƒ½åŽŸå› **ï¼š
- ä»£ç é”™è¯¯
- ä¾èµ–æœªå®‰è£…
- ç«¯å£è¢«å ç”¨

### é—®é¢˜2: æ— æ³•è®¿é—®ç½‘ç«™

**æ£€æŸ¥**ï¼š
1. æœåŠ¡æ˜¯å¦è¿è¡Œï¼š`systemctl status stock-analyzer nginx`
2. é˜²ç«å¢™æ˜¯å¦å¼€æ”¾ç«¯å£ï¼š`firewall-cmd --list-all` æˆ– `ufw status`
3. DNS æ˜¯å¦è§£æžæ­£ç¡®ï¼š`dig daniugu.online`
4. Nginx é…ç½®æ˜¯å¦æ­£ç¡®ï¼š`nginx -t`

### é—®é¢˜3: SSL è¯ä¹¦é—®é¢˜

**è§£å†³**ï¼š
- æ£€æŸ¥ DNS è§£æžæ˜¯å¦æ­£ç¡®
- ç­‰å¾… Certbot è‡ªåŠ¨é…ç½®
- æŸ¥çœ‹ Certbot æ—¥å¿—ï¼š`certbot certificates`

## ðŸ“ éƒ¨ç½²æ£€æŸ¥æ¸…å•

- [ ] ä»£ç å·²æŽ¨é€åˆ° GitHub
- [ ] æœåŠ¡å™¨çŽ¯å¢ƒå·²é…ç½®ï¼ˆPythonã€Nginxã€Gitï¼‰
- [ ] åº”ç”¨å·²éƒ¨ç½²åˆ°æœåŠ¡å™¨
- [ ] Gunicorn æœåŠ¡å·²å¯åŠ¨
- [ ] Nginx å·²é…ç½®å¹¶è¿è¡Œ
- [ ] é˜²ç«å¢™å·²å¼€æ”¾ 80 å’Œ 443 ç«¯å£
- [ ] åŸŸå DNS å·²é…ç½®
- [ ] SSL è¯ä¹¦å·²é…ç½®ï¼ˆHTTPSï¼‰
- [ ] ç½‘ç«™å¯ä»¥æ­£å¸¸è®¿é—®
- [ ] Cloudflare å·²é…ç½®ï¼ˆå¯é€‰ï¼‰

## ðŸ“ž éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æžœé‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹æœåŠ¡æ—¥å¿—
2. æ£€æŸ¥ Nginx é…ç½®
3. éªŒè¯ DNS è§£æž
4. æŸ¥çœ‹é˜²ç«å¢™è®¾ç½®

---

**éƒ¨ç½²å®ŒæˆåŽï¼Œè®¿é—® https://daniugu.online å³å¯ä½¿ç”¨ï¼**


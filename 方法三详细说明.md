# 方法三：使用日志文件查看错误（详细步骤）

## 步骤1：启动服务并保存日志到文件

在终端中运行以下命令：

```bash
cd /Users/zwj/股票分析
python3 surge_analysis_web.py > web.log 2>&1 &
```

命令解释：
- `python3 surge_analysis_web.py` - 运行服务
- `>` - 重定向输出
- `web.log` - 日志文件名（会保存在项目目录中）
- `2>&1` - 把错误输出也保存到同一个文件
- `&` - 在后台运行（这样终端可以继续使用）

## 步骤2：查看实时日志

打开一个新的终端窗口，运行：

```bash
cd /Users/zwj/股票分析
tail -f web.log
```

这个命令会：
- 显示日志文件的最后几行
- `-f` 参数表示"跟随"，会实时显示新添加的日志
- 当你操作网页时，新的日志会立即显示

## 步骤3：在网页上操作

1. 访问 http://localhost:5001
2. 点击"添加股票"按钮
3. 立即查看运行 `tail -f web.log` 的终端窗口
4. 错误信息会实时显示在那里

## 步骤4：停止查看日志

在运行 `tail -f web.log` 的终端窗口中按 `Ctrl+C` 停止查看

## 步骤5：查看最近的错误（如果已经关闭了tail）

```bash
cd /Users/zwj/股票分析
tail -100 web.log | grep -A 20 "error\|Error\|Exception\|Traceback"
```

这个命令会：
- 显示日志文件的最后100行
- 过滤出包含错误关键词的行
- `-A 20` 表示显示匹配行后面的20行（显示完整的错误堆栈）

## 步骤6：停止服务

```bash
pkill -f surge_analysis_web.py
```

或者查看进程ID后停止：
```bash
ps aux | grep surge_analysis_web.py
kill [进程ID]
```
